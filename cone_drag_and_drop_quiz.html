<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i T·∫≠p K√©o Th·∫£: H√¨nh N√≥n</title>
    <!-- T·∫£i Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ƒê·ªãnh d·∫°ng chung cho font */
        body {
            font-family: 'Times New Roman', Times, serif; 
            background-color: #f7f7f7;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        /* ƒê·ªãnh d·∫°ng cho c√°c th√†nh ph·∫ßn k√©o */
        .draggable-item {
            cursor: grab;
            user-select: none;
            transition: all 0.2s;
            /* LO·∫†I B·ªé b√≥ng ƒë·ªï nh·ªè ƒë·ªÉ giao di·ªán th·∫ª ph·∫≥ng h∆°n */
            /* box-shadow: 0 2px 4px rgba(0,0,0,0.1); */
        }
        .draggable-item:active {
            cursor: grabbing;
            opacity: 0.8;
            transform: scale(1.05);
        }
        /* ƒê·ªãnh d·∫°ng cho v√πng th·∫£ (ƒê√É CH·ªàNH S·ª¨A CHI·ªÄU CAO) */
        .drop-zone {
            /* TƒÇNG CHI·ªÄU CAO ƒë·ªÉ kh·ªõp v·ªõi th·∫ª ƒë√°p √°n l·ªõn h∆°n */
            min-width: 140px; 
            height: 48px; 
            background-color: #e0f2f7; 
            border: 2px dashed #0891b2; 
            border-radius: 8px;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            padding: 2px 5px; 
            transition: background-color 0.3s;
        }
        .drop-zone.drag-over {
            background-color: #99f6e4; 
            border-color: #14b8a6;
        }
        /* Hi·ªÉn th·ªã ph·∫ßn t·ª≠ ƒë√£ ƒë∆∞·ª£c th·∫£ */
        .drop-zone .draggable-item {
            margin: 0;
            cursor: default;
        }
        /* ƒê·ªãnh d·∫°ng cho modal (h·ªôp th√¥ng b√°o) */
        .modal {
            transition: opacity 0.3s ease-in-out;
        }
        .modal-content {
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        /* Th√™m style cho n√∫t nh·∫•n xu·ªëng (3D effect) */
        .control-button:active {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06); /* Gi·∫£m shadow khi nh·∫•n */
            transform: translateY(2px); /* D·ªãch chuy·ªÉn n√∫t xu·ªëng nh·∫π */
        }
    </style>
</head>
<body class="bg-gray-100">

    <script>
        // Khai b√°o c√°c ƒë·ªëi t∆∞·ª£ng to√†n c·ª•c
        let draggedElement = null;
        const correctAnswers = {
            'drop-zone-1': 'item-1', // Tam gi√°c vu√¥ng
            'drop-zone-2': 'item-2', // ƒê∆∞·ªùng sinh
            'drop-zone-3': 'item-3'  // Chi·ªÅu cao
        };

        // H√†m hi·ªÉn th·ªã h·ªôp th√¥ng b√°o t√πy ch·ªânh (thay th·∫ø cho alert)
        function showMessage(title, message, isSuccess) {
            const modal = document.getElementById('message-modal');
            const titleEl = document.getElementById('modal-title');
            const bodyEl = document.getElementById('modal-body');

            titleEl.textContent = title;
            bodyEl.textContent = message;

            // ƒê·ªïi m√†u s·∫Øc v√† bi·ªÉu t∆∞·ª£ng d·ª±a tr√™n k·∫øt qu·∫£
            if (isSuccess) {
                titleEl.className = 'text-xl font-bold mb-2 text-green-700';
            } else {
                titleEl.className = 'text-xl font-bold mb-2 text-red-700';
            }

            modal.classList.remove('hidden');
            modal.classList.add('opacity-100');
        }

        // H√†m ƒë√≥ng h·ªôp th√¥ng b√°o
        function closeModal() {
            const modal = document.getElementById('message-modal');
            modal.classList.add('hidden');
            modal.classList.remove('opacity-100');
        }

        // 1. B·∫Øt ƒë·∫ßu k√©o (Drag Start)
        function dragStart(e) {
            draggedElement = e.target;
            // L∆∞u ID c·ªßa ph·∫ßn t·ª≠ ƒëang ƒë∆∞·ª£c k√©o v√†o dataTransfer
            e.dataTransfer.setData('text/plain', e.target.id);
            // Th√™m hi·ªáu ·ª©ng cho ph·∫ßn t·ª≠ ƒëang k√©o
            setTimeout(() => e.target.classList.add('opacity-50'), 0);
        }

        // 2. K√©o qua v√πng th·∫£ (Drag Over)
        function dragOver(e) {
            e.preventDefault(); // Cho ph√©p th·∫£
            e.currentTarget.classList.add('drag-over');
        }

        // 3. R·ªùi kh·ªèi v√πng th·∫£ (Drag Leave)
        function dragLeave(e) {
            e.currentTarget.classList.remove('drag-over');
        }

        // 4. Th·∫£ v√†o v√πng (Drop)
        function drop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('drag-over');

            const data = e.dataTransfer.getData('text/plain');
            const draggable = document.getElementById(data);
            const dropzone = e.currentTarget;

            // Ch·ªâ cho ph√©p th·∫£ n·∫øu v√πng th·∫£ ƒëang tr·ªëng
            if (dropzone.children.length === 0) {
                // ƒê∆∞a ph·∫ßn t·ª≠ k√©o v√†o v√πng th·∫£. Khi d√πng appendChild, ph·∫ßn t·ª≠ s·∫Ω t·ª± ƒë·ªông 
                // b·ªã lo·∫°i b·ªè kh·ªèi cha c≈© c·ªßa n√≥ (dropzone c≈© ho·∫∑c draggable-options).
                dropzone.appendChild(draggable); 
                draggable.classList.remove('opacity-50');
                
                // ƒê√É B·ªé: Kh√¥ng c·∫ßn g·ªçi originalContainer.removeChild(draggable) v√¨ 
                // appendChild ƒë√£ th·ª±c hi·ªán vi·ªác di chuy·ªÉn (lo·∫°i b·ªè kh·ªèi cha c≈©)
            }
        }

        // 5. Ki·ªÉm tra k·∫øt qu·∫£
        function checkAnswers() {
            let correctCount = 0;
            const dropZones = ['drop-zone-1', 'drop-zone-2', 'drop-zone-3'];

            dropZones.forEach(zoneId => {
                const dropzone = document.getElementById(zoneId);
                const droppedItem = dropzone.querySelector('.draggable-item');

                if (droppedItem) {
                    const itemId = droppedItem.id;
                    if (correctAnswers[zoneId] === itemId) {
                        correctCount++;
                        // Ph·∫£n h·ªìi tr·ª±c quan
                        dropzone.classList.remove('bg-red-200', 'bg-blue-100');
                        dropzone.classList.add('bg-green-200', 'border-green-500');
                    } else {
                        // Ph·∫£n h·ªìi tr·ª±c quan
                        dropzone.classList.remove('bg-green-200', 'bg-blue-100');
                        dropzone.classList.add('bg-red-200', 'border-red-500');
                    }
                }
            });

            const totalQuestions = dropZones.length;
            const isSuccess = correctCount === totalQuestions;

            if (isSuccess) {
                showMessage(
                    "CH√öC M·ª™NG!",
                    `B·∫°n ƒë√£ tr·∫£ l·ªùi ƒë√∫ng ${correctCount}/${totalQuestions} c√¢u. Ch√≠nh x√°c!`,
                    true
                );
            } else {
                showMessage(
                    "CH∆ØA CH√çNH X√ÅC",
                    `B·∫°n ƒë√£ tr·∫£ l·ªùi ƒë√∫ng ${correctCount}/${totalQuestions} c√¢u. H√£y xem l·∫°i v√† th·ª≠ l·∫°i nh√©!`,
                    false
                );
            }
        }

        // 6. Thi·∫øt l·∫≠p l·∫°i b√†i t·∫≠p
        function resetQuiz() {
            closeModal();
            const originalOptions = document.getElementById('draggable-options');
            const items = [
                { id: 'item-1', text: 'Tam gi√°c vu√¥ng', style: 'bg-yellow-400 hover:bg-yellow-500' },
                { id: 'item-2', text: 'ƒê∆∞·ªùng sinh', style: 'bg-indigo-400 hover:bg-indigo-500' },
                { id: 'item-3', text: 'Chi·ªÅu cao', style: 'bg-purple-400 hover:bg-purple-500' },
                { id: 'item-4', text: 'H√¨nh ch·ªØ nh·∫≠t', style: 'bg-gray-400 hover:bg-gray-500' },
                { id: 'item-5', text: 'B√°n k√≠nh', style: 'bg-red-400 hover:bg-red-500' }
            ];

            // X√≥a c√°c drop zone v√† reset m√†u
            ['drop-zone-1', 'drop-zone-2', 'drop-zone-3'].forEach(zoneId => {
                const zone = document.getElementById(zoneId);
                zone.innerHTML = '';
                zone.classList.remove('bg-green-200', 'border-green-500', 'bg-red-200', 'border-red-500');
                zone.classList.add('bg-blue-100', 'border-cyan-700');
            });

            // X√≥a h·∫øt v√† t·∫°o l·∫°i c√°c draggable items
            originalOptions.innerHTML = '';
            items.forEach(item => {
                const div = document.createElement('div');
                div.id = item.id;
                div.draggable = true;
                div.textContent = item.text;
                // ƒê√É TH√äM: flex justify-center items-center ƒë·ªÉ cƒÉn gi·ªØa ch·ªØ ho√†n to√†n
                div.className = `draggable-item rounded-2xl py-2 px-3 text-base text-white font-semibold transition-all flex justify-center items-center ${item.style}`;
                div.addEventListener('dragstart', dragStart);
                originalOptions.appendChild(div);
            });
        }

        // G√°n s·ª± ki·ªán khi trang t·∫£i xong
        document.addEventListener('DOMContentLoaded', () => {
            // G√°n s·ª± ki·ªán cho c√°c drop zone
            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.addEventListener('dragover', dragOver);
                zone.addEventListener('dragleave', dragLeave);
                zone.addEventListener('drop', drop);
            });

            // Kh·ªüi t·∫°o c√°c draggable items
            resetQuiz();

            // G√°n s·ª± ki·ªán cho n√∫t ki·ªÉm tra v√† reset
            document.getElementById('check-button').addEventListener('click', checkAnswers);
            document.getElementById('reset-button').addEventListener('click', resetQuiz);

            // G√°n s·ª± ki·ªán cho n√∫t ƒë√≥ng modal
            document.getElementById('close-modal-button').addEventListener('click', closeModal);
        });
    </script>

    <div class="w-full max-w-4xl bg-white p-8 rounded-xl shadow-2xl">
        <h1 class="text-4xl font-extrabold text-cyan-700 mb-6 text-center border-b-4 border-cyan-400 pb-2">
            B√†i T·∫≠p K√©o Th·∫£: Kh√°i Ni·ªám H√¨nh N√≥n üìê
        </h1>
        <p class="text-lg text-gray-700 mb-8 text-center">
            H√£y k√©o v√† th·∫£ c√°c ƒë√°p √°n d∆∞·ªõi ƒë√¢y v√†o √¥ tr·ªëng th√≠ch h·ª£p ƒë·ªÉ ho√†n th√†nh c√°c c√¢u sau.
        </p>

        <!-- KHU V·ª∞C C√ÇU H·ªéI -->
        <div class="space-y-6 mb-10 text-xl font-medium text-gray-800">

            <div class="flex flex-wrap items-center gap-2">
                <span class="font-bold text-cyan-600">C√¢u 1:</span>
                <span>Khi quay h√¨nh</span>
                <div id="drop-zone-1" class="drop-zone flex-shrink-0 bg-blue-100 border-cyan-700"></div>
                <span>quanh m·ªôt c·∫°nh g√≥c vu√¥ng, ta ƒë∆∞·ª£c h√¨nh n√≥n.</span>
            </div>

            <div class="flex flex-wrap items-center gap-2">
                <span class="font-bold text-cyan-600">C√¢u 2:</span>
                <span>C·∫°nh huy·ªÅn khi quay t·∫°o th√†nh</span>
                <div id="drop-zone-2" class="drop-zone flex-shrink-0 bg-blue-100 border-cyan-700"></div>
                <span>c·ªßa h√¨nh n√≥n.</span>
            </div>

            <div class="flex flex-wrap items-center gap-2">
                <span class="font-bold text-cyan-600">C√¢u 3:</span>
                <span>C·∫°nh g√≥c vu√¥ng c√≤n l·∫°i khi quay t·∫°o th√†nh</span>
                <div id="drop-zone-3" class="drop-zone flex-shrink-0 bg-blue-100 border-cyan-700"></div>
                <span>c·ªßa h√¨nh n√≥n.</span>
            </div>

        </div>

        <!-- KHU V·ª∞C ƒê√ÅP √ÅN (DRAGGABLE ITEMS) -->
        <h2 class="text-2xl font-semibold text-gray-700 mb-4 border-t pt-4">ƒê√°p √°n (K√©o v√† Th·∫£)</h2>
        <div id="draggable-options" class="flex flex-wrap gap-4 p-4 border border-gray-300 rounded-lg bg-gray-50 min-h-[100px]">
            <!-- C√°c ph·∫ßn t·ª≠ k√©o th·∫£ s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JavaScript -->
        </div>

        <!-- N√öT CH·ª®C NƒÇNG (ƒê√É CH·ªàNH S·ª¨A PHONG C√ÅCH) -->
        <div class="flex justify-center space-x-6 mt-10">
            <!-- N√∫t KI·ªÇM TRA -->
            <button id="check-button" 
                    class="control-button px-10 py-4 bg-green-600 text-white text-xl font-extrabold rounded-full 
                           hover:bg-green-700 transition-all transform hover:scale-105 shadow-2xl">
                KI·ªÇM TRA
            </button>
            <!-- N√∫t L√ÄM L·∫†I -->
            <button id="reset-button" 
                    class="control-button px-10 py-4 bg-red-600 text-white text-xl font-extrabold rounded-full 
                           hover:bg-red-700 transition-all transform hover:scale-105 shadow-2xl">
                L√ÄM L·∫†I
            </button>
        </div>
    </div>

    <!-- CUSTOM MODAL (H·ªòP TH√îNG B√ÅO) -->
    <div id="message-modal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden opacity-0">
        <div class="modal-content bg-white p-8 rounded-xl max-w-sm w-full text-center">
            <h3 id="modal-title" class="text-xl font-bold mb-4"></h3>
            <p id="modal-body" class="text-gray-700 mb-6"></p>
            <button id="close-modal-button" class="px-6 py-2 bg-cyan-600 text-white font-semibold rounded-full hover:bg-cyan-700 transition-colors">
                ƒê√≥ng
            </button>
        </div>
    </div>

</body>
</html>
